<!DOCTYPE html>
<html lang="gu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>рк╕рлБрк░ркд рк╕ркорк╛ркЪрк╛рк░ - ркЧрлБркЬрк░рк╛ркдрлА ркирлНркпрлВркЭ</title>
  <meta name="description" content="рк╕рлБрк░ркд рк╢рк╣рлЗрк░ркирк╛  ркдрк╛ркЬрк╛ рк╕ркорк╛ркЪрк╛рк░ ркЧрлБркЬрк░рк╛ркдрлАркорк╛ркВ рк╡рк╛ркВркЪрлЛ. ркЕрк╣рлАркВ ркдркоркирлЗ ркорк│рлА рк░рк╣рлЗрк╢рлЗ рк╕рлБрк░ркдркирлА ркирлНркпрлВркЭ рк╕рлМркерлА ркЭркбрккрлА ркЕркирлЗ ркЖркзрк╛рк░рлАркд рк╕рлВркдрлНрк░рлЛ рккрк░ркерлА.">
  <meta name="keywords" content="Surat News, Surat Samachar, рк╕рлБрк░ркд рк╕ркорк╛ркЪрк╛рк░, Gujarat News, Gujarati News, Today Surat News, Local News Surat">
  <meta name="title" content="рк╕рлБрк░ркд рк╕ркорк╛ркЪрк╛рк░ - ркЧрлБркЬрк░рк╛ркдрлА ркирлНркпрлВркЭ">

  <!-- Open Graph Tags -->
  <meta property="og:title" content="рк╕рлБрк░ркд рк╕ркорк╛ркЪрк╛рк░ - ркЧрлБркЬрк░рк╛ркдрлА ркирлНркпрлВркЭ" />
  <meta property="og:description" content="рк╕рлБрк░ркд рк╢рк╣рлЗрк░ркирк╛ ркдрк╛ркЬрк╛ рк╕ркорк╛ркЪрк╛рк░ ркЧрлБркЬрк░рк╛ркдрлАркорк╛ркВ рк╡рк╛ркВркЪрлЛ." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://surat-news.netlify.app" />
  <meta property="og:locale" content="gu_IN" />
  <meta property="og:image" content="https://surat-news.netlify.app/assets/Suratnews.png" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="рк╕рлБрк░ркд рк╕ркорк╛ркЪрк╛рк░ - ркЧрлБркЬрк░рк╛ркдрлА ркирлНркпрлВркЭ" />
  <meta name="twitter:description" content="рк╕рлБрк░ркд рк╢рк╣рлЗрк░ркирк╛ ркдрк╛ркЬрк╛ рк╕ркорк╛ркЪрк╛рк░ ркЧрлБркЬрк░рк╛ркдрлАркорк╛ркВ рк╡рк╛ркВркЪрлЛ." />
  <meta name="twitter:image" content="https://surat-news.netlify.app/assets/Suratnews.png" />

  <!-- Favicon -->
  <link rel="icon" href="../assets/Suratnews.png" type="image/png">

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f3f4f6;
    }
    .news-card {
      transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
    }
    .news-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body class="p-4 md:p-8">

  <div class="container mx-auto max-w-7xl">
    <header class="text-center mb-10">
      <h1 class="text-5xl font-extrabold text-gray-900 mb-4">рк╕рлБрк░ркд рк╢рк╣рлЗрк░ркирк╛ рк╕ркорк╛ркЪрк╛рк░</h1>
      <p class="text-xl text-gray-600"> ркдрк╛ркЬрк╛ рк╕ркорк╛ркЪрк╛рк░ - ркЧрлБркЬрк░рк╛ркдрлА ркнрк╛рк╖рк╛ркорк╛ркВ</p>
    </header>

    <main id="newsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- Dynamic news items will be inserted here -->
    </main>
  </div>

  <script>
    const rssUrl = "https://news.google.com/rss/search?q=Surat&hl=gu&gl=IN&ceid=IN:gu";
    const proxy = "https://api.allorigins.win/raw?url=" + encodeURIComponent(rssUrl);
    const container = document.getElementById("newsGrid");

    function formatDate(pubDate) {
      const date = new Date(pubDate);
      return date.toLocaleString("gu-IN", {
        year: "numeric", month: "short", day: "numeric",
        hour: "2-digit", minute: "2-digit"
      });
    }

    function isTodayOrYesterday(pubDate) {
      const newsDate = new Date(pubDate);
      const now = new Date();

      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
      const yesterday = new Date(today);
      yesterday.setDate(today.getDate() - 1);

      const compareDate = new Date(newsDate.getFullYear(), newsDate.getMonth(), newsDate.getDate());
      return compareDate.getTime() === today.getTime() || compareDate.getTime() === yesterday.getTime();
    }

    function loadNews() {
      container.innerHTML = "<p class='col-span-full text-center text-gray-500 text-lg'>ЁЯФД рк╕ркорк╛ркЪрк╛рк░ рк▓рлЛркб ркеркИ рк░рк╣рлНркпрк╛ ркЫрлЗ...</p>";
      fetch(proxy)
        .then(response => response.text())
        .then(str => new window.DOMParser().parseFromString(str, "text/xml"))
        .then(data => {
          let items = Array.from(data.querySelectorAll("item")).filter(item => {
            const pubDate = item.querySelector("pubDate")?.textContent;
            return pubDate && isTodayOrYesterday(pubDate);
          });

          // Sort newest first
          items.sort((a, b) => {
            return new Date(b.querySelector("pubDate").textContent) - new Date(a.querySelector("pubDate").textContent);
          });

          if (!items.length) {
            container.innerHTML = "<p class='col-span-full text-center text-red-500'>тЭМ ркЖркЬ ркЕркерк╡рк╛ ркХрк╛рк▓ркирк╛ ркХрлЛркИ рк╕ркорк╛ркЪрк╛рк░ ркорк│рлНркпрк╛ ркиркерлА.</p>";
            return;
          }

          const html = items.map(item => {
            const title = item.querySelector("title")?.textContent || "рк╕ркорк╛ркЪрк╛рк░ ркЙрккрк▓ркмрлНркз ркиркерлА";
            const link = item.querySelector("link")?.textContent || "#";
            const pubDate = item.querySelector("pubDate")?.textContent;

            return `
              <div class="bg-white rounded-lg shadow-md p-6 news-card">
                <span class="inline-block bg-indigo-100 text-indigo-800 text-xs font-semibold px-2.5 py-0.5 rounded-full mb-2">рк╕рлБрк░ркд рк╕ркорк╛ркЪрк╛рк░</span>
                <h2 class="text-xl font-bold text-gray-900 mb-2">
                  <a href="${link}" target="_blank" class="hover:underline text-blue-700">${title}</a>
                </h2>
                ${pubDate ? `<div class="text-sm text-gray-500 mb-2">ЁЯХТ ${formatDate(pubDate)}</div>` : ""}
                <a href="${link}" target="_blank" class="text-sm text-indigo-600 hover:underline">рк╡ркзрлБ рк╡рк╛ркВркЪрлЛ</a>
              </div>
            `;
          }).join("");

          container.innerHTML = html;
        })
        .catch(err => {
          console.error("Error loading news:", err);
          container.innerHTML = "<p class='col-span-full text-center text-red-600'>тЭМ рк╕ркорк╛ркЪрк╛рк░ рк▓рлЛркб ркХрк░рк╡рк╛ркорк╛ркВ ркирк┐рк╖рлНрклрк│ркдрк╛.</p>";
          setTimeout(() => {
            window.location.reload();
          }, 1000);
        });
    }

    loadNews();
    setInterval(loadNews, 60000); // Refresh every 1 minute
  </script>
</body>
</html>
